# 4G/5G 网络的 IPv6 中继配置

## 1. 背景说明
为什么需要使用 IPv6 中继？大多数 4G/5G 网络仅分配 64 位前缀的 IPv6 地址，且无法获取 IPv6-PD（前缀委派）地址，因此下游设备无法直接获得公网 IPv6 地址。

## 2. 网络拓扑示例
```
clients--->(lan)Router(usbwan6)--->Internet
```

## 3. 配置步骤
### 1. 配置 `usbwan` 实现基本的 IPv4 上网：
- 设置 `DHCP` 上网模式，确保路由器可以正常通过 IPv4 上网。

### 2. 添加 `usbwan6` 接口：
- 创建一个名为 `usbwan6` 的新接口。
- 将 `协议` 设置为 **DHCPv6 客户端**。
- `设备` 选择对应的 `usbwan` 设备，或者直接填写接口别名 `@usbwan`。

### 3. 配置防火墙：
- 将 `usbwan6` 接口的防火墙区域设置为 **WAN** 区域，以确保 IPv6 流量可以正确通过。

### 4. 配置 `usbwan6` 的 IPv6 设置：
- 进入 `DHCP 服务` -> `IPv6 设置`：
  - 开启 **指定为主接口**（注意：只能有一个主接口）。
  - 将 **RA 服务**、**DHCPv6 服务**、**NDP 代理** 都设置为 **中继模式** 或 **混合模式**。
  - 启用 **学习路由** 选项。

### 5. 配置 LAN 口的 IPv6 设置：
- 进入 `DHCP 服务` -> `IPv6 设置`：
  - 将 **RA 服务**、**DHCPv6 服务**、**NDP 代理** 全部设置为 **中继模式** 或 **混合模式**。
  - 同样启用 **学习路由** 选项。

完成这些步骤后，路由器将通过 IPv6 中继功能为下游设备提供公网 IPv6 地址。
